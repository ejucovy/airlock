
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Express side effects anywhere. Control whether & when they escape.">
      
      
      
        <link rel="canonical" href="https://ejucovy.github.io/airlock/api/core/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../django/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Core - Airlock</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#core-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Airlock" class="md-header__button md-logo" aria-label="Airlock" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Airlock
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ejucovy/airlock" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ejucovy/airlock
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstart/django/" class="md-tabs__link">
        
  
  
    
  
  Quickstart

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../understanding/the-problem/" class="md-tabs__link">
          
  
  
    
  
  Understanding Airlock

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../celery/" class="md-tabs__link">
          
  
  
    
  
  Celery

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../extending/custom-policies/" class="md-tabs__link">
          
  
  
    
  
  Extending

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Airlock" class="md-nav__button md-logo" aria-label="Airlock" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Airlock
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ejucovy/airlock" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ejucovy/airlock
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/django/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Understanding Airlock
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Understanding Airlock
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../understanding/the-problem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Problem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../understanding/core-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Model (3 Concerns)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../understanding/design-invariants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Invariants
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../understanding/nesting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nesting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../understanding/alternatives/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Alternatives
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../celery/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Celery
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Celery
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../celery/task-wrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Wrapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../celery/migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Extending
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Extending
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extending/custom-policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extending/custom-executors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Executors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extending/custom-scopes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Scopes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        scope
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="scope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.scope--use-celery-executor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use celery executor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.scope--use-django-q-executor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use django-q executor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.enqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        enqueue
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        policy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.get_current_scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_scope
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scope
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.intents" class="md-nav__link">
    <span class="md-ellipsis">
      
        intents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.own_intents" class="md-nav__link">
    <span class="md-ellipsis">
      
        own_intents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.captured_intents" class="md-nav__link">
    <span class="md-ellipsis">
      
        captured_intents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.is_flushed" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_flushed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.is_discarded" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_discarded
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.is_active" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_active
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.enter" class="md-nav__link">
    <span class="md-ellipsis">
      
        enter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.exit" class="md-nav__link">
    <span class="md-ellipsis">
      
        exit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.discard" class="md-nav__link">
    <span class="md-ellipsis">
      
        discard
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.should_flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        should_flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.before_descendant_flushes" class="md-nav__link">
    <span class="md-ellipsis">
      
        before_descendant_flushes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Intent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Intent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.task" class="md-nav__link">
    <span class="md-ellipsis">
      
        task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.args" class="md-nav__link">
    <span class="md-ellipsis">
      
        args
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.kwargs" class="md-nav__link">
    <span class="md-ellipsis">
      
        kwargs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.origin" class="md-nav__link">
    <span class="md-ellipsis">
      
        origin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.dispatch_options" class="md-nav__link">
    <span class="md-ellipsis">
      
        dispatch_options
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.name" class="md-nav__link">
    <span class="md-ellipsis">
      
        name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.local_policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        local_policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.passes_local_policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        passes_local_policies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protocols
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Policy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Policy.on_enqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        on_enqueue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Policy.allows" class="md-nav__link">
    <span class="md-ellipsis">
      
        allows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Executor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executor
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Executor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Executor.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __call__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Built-in Policies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.AllowAll" class="md-nav__link">
    <span class="md-ellipsis">
      
        AllowAll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.DropAll" class="md-nav__link">
    <span class="md-ellipsis">
      
        DropAll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.AssertNoEffects" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssertNoEffects
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.BlockTasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        BlockTasks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.LogOnFlush" class="md-nav__link">
    <span class="md-ellipsis">
      
        LogOnFlush
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.CompositePolicy" class="md-nav__link">
    <span class="md-ellipsis">
      
        CompositePolicy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exceptions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.AirlockError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AirlockError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.UsageError" class="md-nav__link">
    <span class="md-ellipsis">
      
        UsageError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.NoScopeError" class="md-nav__link">
    <span class="md-ellipsis">
      
        NoScopeError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.PolicyEnqueueError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PolicyEnqueueError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.ScopeStateError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ScopeStateError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.PolicyViolation" class="md-nav__link">
    <span class="md-ellipsis">
      
        PolicyViolation
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../django/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Django
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../celery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Celery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../executors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Executors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        scope
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="scope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.scope--use-celery-executor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use celery executor
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.scope--use-django-q-executor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Use django-q executor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.enqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        enqueue
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        policy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.get_current_scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_current_scope
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Classes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Scope" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scope
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scope">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.intents" class="md-nav__link">
    <span class="md-ellipsis">
      
        intents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.own_intents" class="md-nav__link">
    <span class="md-ellipsis">
      
        own_intents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.captured_intents" class="md-nav__link">
    <span class="md-ellipsis">
      
        captured_intents
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.is_flushed" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_flushed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.is_discarded" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_discarded
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.is_active" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_active
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.enter" class="md-nav__link">
    <span class="md-ellipsis">
      
        enter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.exit" class="md-nav__link">
    <span class="md-ellipsis">
      
        exit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.discard" class="md-nav__link">
    <span class="md-ellipsis">
      
        discard
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.should_flush" class="md-nav__link">
    <span class="md-ellipsis">
      
        should_flush
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Scope.before_descendant_flushes" class="md-nav__link">
    <span class="md-ellipsis">
      
        before_descendant_flushes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Intent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Intent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.task" class="md-nav__link">
    <span class="md-ellipsis">
      
        task
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.args" class="md-nav__link">
    <span class="md-ellipsis">
      
        args
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.kwargs" class="md-nav__link">
    <span class="md-ellipsis">
      
        kwargs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.origin" class="md-nav__link">
    <span class="md-ellipsis">
      
        origin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.dispatch_options" class="md-nav__link">
    <span class="md-ellipsis">
      
        dispatch_options
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.name" class="md-nav__link">
    <span class="md-ellipsis">
      
        name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.local_policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        local_policies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Intent.passes_local_policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        passes_local_policies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#protocols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Protocols
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Policy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Policy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Policy.on_enqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        on_enqueue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#airlock.Policy.allows" class="md-nav__link">
    <span class="md-ellipsis">
      
        allows
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.Executor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Executor
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Executor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#airlock.Executor.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __call__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-policies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Built-in Policies
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.AllowAll" class="md-nav__link">
    <span class="md-ellipsis">
      
        AllowAll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.DropAll" class="md-nav__link">
    <span class="md-ellipsis">
      
        DropAll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.AssertNoEffects" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssertNoEffects
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.BlockTasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        BlockTasks
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.LogOnFlush" class="md-nav__link">
    <span class="md-ellipsis">
      
        LogOnFlush
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.CompositePolicy" class="md-nav__link">
    <span class="md-ellipsis">
      
        CompositePolicy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exceptions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.AirlockError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AirlockError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.UsageError" class="md-nav__link">
    <span class="md-ellipsis">
      
        UsageError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.NoScopeError" class="md-nav__link">
    <span class="md-ellipsis">
      
        NoScopeError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.PolicyEnqueueError" class="md-nav__link">
    <span class="md-ellipsis">
      
        PolicyEnqueueError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.ScopeStateError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ScopeStateError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#airlock.PolicyViolation" class="md-nav__link">
    <span class="md-ellipsis">
      
        PolicyViolation
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="core-api">Core API<a class="headerlink" href="#core-api" title="Permanent link">&para;</a></h1>
<p>The main airlock module. Import with <code>import airlock</code>.</p>
<h2 id="functions">Functions<a class="headerlink" href="#functions" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-function">


<h2 id="airlock.scope" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">scope</span>


<a href="#airlock.scope" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">scope</span><span class="p">(</span><span class="n">policy</span><span class="p">:</span> <span class="n">Policy</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_cls</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">Scope</span><span class="p">]</span> <span class="o">=</span> <span class="n">Scope</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Scope</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents first">

        <p>Context manager defining a lifecycle boundary for side effects.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>policy</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Policy (airlock.Policy)" href="#airlock.Policy">Policy</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Policy controlling what intents are allowed. Defaults to AllowAll.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_cls</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<a class="autorefs autorefs-internal" title="Scope (airlock.Scope)" href="#airlock.Scope">Scope</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Scope class to use. Subclass Scope and override should_flush()
to customize flush/discard behavior.</p>
              </div>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Scope (airlock.Scope)" href="#airlock.Scope">Scope</a></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional arguments passed to Scope constructor (e.g., executor).</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<details class="common-kwargs" open>
  <summary>Common kwargs</summary>
  <p>executor: Callable that executes intents. Defaults to synchronous execution.
    See airlock.integrations.executors for available executors.</p>
</details>

<details class="behavior" open>
  <summary>Behavior</summary>
  <ul>
<li>On normal exit: calls flush() if should_flush(None) returns True</li>
<li>On exception: calls flush() if should_flush(error) returns True, else discard()</li>
</ul>
</details>        <p>The default Scope.should_flush() returns True on success, False on error.
Subclass Scope to customize this behavior.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <h3 id="airlock.scope--use-celery-executor">Use celery executor<a class="headerlink" href="#airlock.scope--use-celery-executor" title="Permanent link">&para;</a></h3>
<p>from airlock.integrations.executors.celery import celery_executor
with airlock.scope(executor=celery_executor):
    airlock.enqueue(my_task, ...)</p>
<h3 id="airlock.scope--use-django-q-executor">Use django-q executor<a class="headerlink" href="#airlock.scope--use-django-q-executor" title="Permanent link">&para;</a></h3>
<p>from airlock.integrations.executors.django_q import django_q_executor
with airlock.scope(executor=django_q_executor):
    airlock.enqueue(my_task, ...)</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="airlock.enqueue" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">enqueue</span>


<a href="#airlock.enqueue" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">enqueue</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">_origin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_dispatch_options</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents first">

        <p>Express intent to perform a side effect.</p>
<p>This is the ONLY function domain code should call.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>task</code>
            </td>
            <td>
                  <code><span title="typing.Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The callable to execute (Celery task, function, etc.)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Positional arguments for the task.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_origin</code>
            </td>
            <td>
                  <code><span title="str">str</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional origin metadata for debugging/observability.
This is NOT auto-detected - it must be set explicitly if needed.
Integrations (Django middleware, Celery task wrapper) may set this
to provide context like request path, task name, or trace/span IDs.
For structured observability, prefer OpenTelemetry span context.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>_dispatch_options</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional dispatch options (countdown, queue, etc.)
Passed through to the task queue backend (e.g., Celery's apply_async).
Ignored for plain callables.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Keyword arguments for the task.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PolicyEnqueueError (airlock.PolicyEnqueueError)" href="#airlock.PolicyEnqueueError">PolicyEnqueueError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If called from within a policy callback.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="NoScopeError (airlock.NoScopeError)" href="#airlock.NoScopeError">NoScopeError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no scope is active.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="PolicyViolation (airlock.PolicyViolation)" href="#airlock.PolicyViolation">PolicyViolation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If a policy explicitly rejects the intent via on_enqueue().
For example, AssertNoEffects policy raises PolicyViolation on any enqueue.
When this happens, the intent is NOT added to the buffer.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="airlock.policy" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">policy</span>


<a href="#airlock.policy" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">policy</span><span class="p">(</span><span class="n">p</span><span class="p">:</span> <span class="n">Policy</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents first">

        <p>Context manager for local policy contexts.</p>
<p>Intents enqueued within this context capture the policy and apply it
at flush time. This enables local control without nested buffers.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>with airlock.scope():
    airlock.enqueue(task_a)  # will dispatch</p>
<div class="language-text highlight"><pre><span></span><code>with airlock.policy(DropAll()):
    airlock.enqueue(task_b)  # will NOT dispatch

airlock.enqueue(task_c)  # will dispatch
</code></pre></div>
</details>        <p>Unlike nested scopes, all intents go to the same buffer. The local
policy is metadata that affects dispatch decisions at flush.</p>
<p>NOTE: This does NOT create a new buffer or nested scope. All intents
from within this context still go to the enclosing scope's buffer.
The policy is captured on each intent at enqueue time and evaluated
at flush. This is intentional - it preserves a single dispatch boundary
while allowing fine-grained control over which intents survive.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="airlock.get_current_scope" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_current_scope</span>


<a href="#airlock.get_current_scope" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">get_current_scope</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Scope</span> <span class="o">|</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents first">

        <p>Get the currently active airlock scope, if any.</p>


    </div>

</div><h2 id="classes">Classes<a class="headerlink" href="#classes" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="airlock.Scope" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Scope</span>


<a href="#airlock.Scope" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>A lifecycle scope that buffers and controls side effect intents.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>policy</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Policy (airlock.Policy)" href="#airlock.Policy">Policy</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Policy controlling what intents are allowed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>executor</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Executor (airlock.Executor)" href="#airlock.Executor">Executor</a> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Callable that executes intents. Defaults to synchronous execution.
See airlock.integrations.executors for available executors.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="airlock.Scope.intents" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">intents</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Scope.intents" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">intents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Read-only access to buffered intents for inspection.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Scope.own_intents" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">own_intents</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Scope.own_intents" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">own_intents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Intents enqueued directly in this scope (not captured from nested scopes).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Scope.captured_intents" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">captured_intents</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Scope.captured_intents" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">captured_intents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Intents captured from nested scopes.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Scope.is_flushed" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_flushed</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Scope.is_flushed" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">is_flushed</span><span class="p">:</span> <span class="nb">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Scope.is_discarded" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_discarded</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Scope.is_discarded" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">is_discarded</span><span class="p">:</span> <span class="nb">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Scope.is_active" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">is_active</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Scope.is_active" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">is_active</span><span class="p">:</span> <span class="nb">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>True if this scope is currently the active scope.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="airlock.Scope.enter" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">enter</span>


<a href="#airlock.Scope.enter" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">enter</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Scope</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Activate this scope.</p>
<p>Sets the context var so enqueue() routes intents to this scope.
Must call exit() when done, before calling flush() or discard().</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="Scope (airlock.Scope)" href="#airlock.Scope">Scope</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>self (for chaining)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScopeStateError (airlock.ScopeStateError)" href="#airlock.ScopeStateError">ScopeStateError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If this scope is already active.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="airlock.Scope.exit" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">exit</span>


<a href="#airlock.Scope.exit" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">exit</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Deactivate this scope.</p>
<p>Resets the context var to the previous scope (or None).
Must be called before flush() or discard().</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScopeStateError (airlock.ScopeStateError)" href="#airlock.ScopeStateError">ScopeStateError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If this scope is not active.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="airlock.Scope.flush" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">flush</span>


<a href="#airlock.Scope.flush" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">flush</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Flush all buffered intents - apply policy and dispatch.</p>
<p>Filters intents through policies (both local and scope-level), then dispatches
them in FIFO order using the configured executor.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Intent


  
      dataclass
   (airlock.Intent)" href="#airlock.Intent">Intent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of intents that were dispatched (after policy filtering).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ScopeStateError (airlock.ScopeStateError)" href="#airlock.ScopeStateError">ScopeStateError</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If scope is already flushed, discarded, or still active.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>The scope is marked as flushed even if an executor raises an exception.
This prevents retry attempts, as the scope is in an inconsistent state
(some intents may have been dispatched before the failure).</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="airlock.Scope.discard" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">discard</span>


<a href="#airlock.Scope.discard" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">discard</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Discard all buffered intents without dispatching.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="airlock.Scope.should_flush" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">should_flush</span>


<a href="#airlock.Scope.should_flush" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">should_flush</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Decide terminal action when context manager exits.</p>
<p>Override this method in subclasses to customize flush/discard behavior.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>error</code>
            </td>
            <td>
                  <code><span title="BaseException">BaseException</span> | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The exception that caused exit, or None for normal exit.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to flush (dispatch intents), False to discard.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Default behavior: flush on success, discard on error.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="airlock.Scope.before_descendant_flushes" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">before_descendant_flushes</span>


<a href="#airlock.Scope.before_descendant_flushes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">before_descendant_flushes</span><span class="p">(</span><span class="n">exiting_scope</span><span class="p">:</span> <span class="n">Scope</span><span class="p">,</span> <span class="n">intents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Intent</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Called when a nested scope exits and attempts to flush.</p>
<p>This method is called during the parent chain walk, allowing each ancestor
to decide which intents the exiting scope may flush vs which to capture.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>exiting_scope</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Scope (airlock.Scope)" href="#airlock.Scope">Scope</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The nested scope that is exiting (may be deeply nested)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>intents</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Intent


  
      dataclass
   (airlock.Intent)" href="#airlock.Intent">Intent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of intents the exiting scope wants to flush</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Intent


  
      dataclass
   (airlock.Intent)" href="#airlock.Intent">Intent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The list of intents to allow through (the exiting scope will flush these).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Intent


  
      dataclass
   (airlock.Intent)" href="#airlock.Intent">Intent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Any intents not in the returned list are captured into this scope's buffer.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>IMPORTANT</code></td>            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="Intent


  
      dataclass
   (airlock.Intent)" href="#airlock.Intent">Intent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Must return a list. Returning None or other types raises TypeError.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="TypeError">TypeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If return value is not a list.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Default behavior: Capture all intents (return []).
This is the controlled default - outer scopes have authority over nested scopes.</p>


<details class="override-this-method-to-allow-nested-scopes-to-flush-independently" open>
  <summary>Override this method to allow nested scopes to flush independently</summary>
  <ul>
<li>Return [] to capture all intents (default, controlled)</li>
<li>Return intents to allow all (independent nested scopes)</li>
<li>Return filtered list to selectively capture</li>
</ul>
</details>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Do not mutate the <code>intents</code> list. Return a new list or slice.</li>
<li>Returning intents not in the input list has undefined behavior.</li>
<li>In multi-level nesting, <code>exiting_scope</code> is always the innermost scope,
  not necessarily the immediate child. Intermediate scopes haven't exited yet.</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <p>class IndependentScope(Scope):
    def before_descendant_flushes(self, exiting_scope, intents):
        return intents  # Allow nested scopes to flush independently</p>
<p>class SmartScope(Scope):
    def before_descendant_flushes(self, exiting_scope, intents):
        # Capture dangerous tasks, allow safe ones
        return [i for i in intents if 'dangerous' not in i.name]</p>
</details>

    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.Intent" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Intent</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#airlock.Intent" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Represents the intent to perform a side effect.</p>
<p>Stores the actual callable, not just a name. The name property
derives a string for serialization/logging.</p>
<p>Captures local policy context at enqueue time for introspection
and deferred application at flush.</p>











<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.task" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">task</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#airlock.Intent.task" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">task</span><span class="p">:</span> <span class="n">Callable</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.args" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">args</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#airlock.Intent.args" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">args</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.kwargs" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">kwargs</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#airlock.Intent.kwargs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.origin" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">origin</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#airlock.Intent.origin" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">origin</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.dispatch_options" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">dispatch_options</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#airlock.Intent.dispatch_options" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">dispatch_options</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Intent.name" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Derived name for serialization/logging.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="airlock.Intent.local_policies" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">local_policies</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#airlock.Intent.local_policies" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">local_policies</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Policy</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Local policies captured at enqueue time.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="airlock.Intent.passes_local_policies" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">passes_local_policies</span>


<a href="#airlock.Intent.passes_local_policies" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">passes_local_policies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if this intent passes its captured local policies.</p>
<p>Returns True if all local policies allow this intent.</p>


<details class="note" open>
  <summary>This does NOT guarantee the intent will be dispatched. It does not consider:</summary>
  <ul>
<li>scope-level policy (checked separately at flush)</li>
<li>whether the scope flushes or discards</li>
<li>dispatch execution success</li>
</ul>
</details>        <p>Use for inspection and audit, not execution prediction.</p>


    </div>

</div>



  </div>

    </div>

</div><h2 id="protocols">Protocols<a class="headerlink" href="#protocols" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="airlock.Policy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Policy</span>


<a href="#airlock.Policy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>



        <p>Protocol for side effect policies.</p>
<p>Policies are per-intent boolean gates that decide which intents dispatch.
This design enforces FIFO order by construction - policies can filter
intents but cannot reorder them.</p>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="on_enqueue (airlock.Policy.on_enqueue)" href="#airlock.Policy.on_enqueue">on_enqueue</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Called when an intent is added to the buffer. Use for
observation, logging, or raising PolicyViolation for hard blocks.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="allows (airlock.Policy.allows)" href="#airlock.Policy.allows">allows</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Called at flush time for each intent. Return True to dispatch,
False to silently drop.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="airlock.Policy.on_enqueue" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">on_enqueue</span>


<a href="#airlock.Policy.on_enqueue" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">on_enqueue</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Called when an intent is added to the buffer. Observe or raise.</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="airlock.Policy.allows" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">allows</span>


<a href="#airlock.Policy.allows" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">allows</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Called at flush time. Return True to dispatch, False to drop.</p>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.Executor" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Executor</span>


<a href="#airlock.Executor" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>



        <p>Protocol for intent executors.</p>
<p>An executor is a callable that takes an Intent and executes it
via some dispatch mechanism (synchronous, Celery, django-q, etc.).</p>
<p>Built-in executors are available in airlock.integrations.executors:
- sync_executor: Synchronous execution (default)
- celery_executor: Dispatch via Celery .delay() / .apply_async()
- django_q_executor: Dispatch via django-q's async_task()
- django_tasks_executor: Dispatch via Django 6+'s built-in tasks framework
- huey_executor: Dispatch via Huey's .schedule()
- dramatiq_executor: Dispatch via Dramatiq's .send()</p>
<p>Custom executors can be written by implementing this protocol.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="airlock.Executor.__call__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__call__</span>


<a href="#airlock.Executor.__call__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="language-python doc-signature highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">__call__</span><span class="p">(</span><span class="n">intent</span><span class="p">:</span> <span class="n">Intent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</span></code></pre></div>

    <div class="doc doc-contents ">

        <p>Execute the given intent.</p>


    </div>

</div>



  </div>

    </div>

</div><h2 id="built-in-policies">Built-in Policies<a class="headerlink" href="#built-in-policies" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="airlock.AllowAll" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AllowAll</span>


<a href="#airlock.AllowAll" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Policy that allows all side effects.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.DropAll" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DropAll</span>


<a href="#airlock.DropAll" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Policy that drops all side effects.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.AssertNoEffects" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AssertNoEffects</span>


<a href="#airlock.AssertNoEffects" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Policy that raises if any side effect is attempted.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.BlockTasks" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BlockTasks</span>


<a href="#airlock.BlockTasks" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Policy that blocks specific tasks by name.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.LogOnFlush" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LogOnFlush</span>


<a href="#airlock.LogOnFlush" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Policy that logs intents at flush time (allows all).</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.CompositePolicy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">CompositePolicy</span>


<a href="#airlock.CompositePolicy" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Policy that combines multiple policies (all must allow).</p>











<div class="doc doc-children">












  </div>

    </div>

</div><h2 id="exceptions">Exceptions<a class="headerlink" href="#exceptions" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-class">



<h2 id="airlock.AirlockError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AirlockError</span>


<a href="#airlock.AirlockError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>



        <p>Base exception for all airlock errors.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.UsageError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">UsageError</span>


<a href="#airlock.UsageError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AirlockError (airlock.AirlockError)" href="#airlock.AirlockError">AirlockError</a></code></p>



        <p>Raised when airlock is used incorrectly (API misuse).</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.NoScopeError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">NoScopeError</span>


<a href="#airlock.NoScopeError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="UsageError (airlock.UsageError)" href="#airlock.UsageError">UsageError</a></code></p>



        <p>Raised when enqueue() is called with no active scope.</p>
<p>This is intentional: airlock requires explicit lifecycle boundaries.
Side effects should not escape silently. Every enqueue() must occur
within a scope() that decides when (and whether) effects dispatch.</p>
<p>If you're seeing this error, wrap your code in an airlock.scope():</p>
<div class="language-text highlight"><pre><span></span><code>with airlock.scope():
    do_stuff()  # enqueue() calls are now valid
</code></pre></div>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.PolicyEnqueueError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">PolicyEnqueueError</span>


<a href="#airlock.PolicyEnqueueError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="UsageError (airlock.UsageError)" href="#airlock.UsageError">UsageError</a></code></p>



        <p>Raised when enqueue() is called from within a policy callback.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.ScopeStateError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ScopeStateError</span>


<a href="#airlock.ScopeStateError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AirlockError (airlock.AirlockError)" href="#airlock.AirlockError">AirlockError</a></code></p>



        <p>Raised when an operation is invalid for the scope's current lifecycle state.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="airlock.PolicyViolation" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">PolicyViolation</span>


<a href="#airlock.PolicyViolation" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="AirlockError (airlock.AirlockError)" href="#airlock.AirlockError">AirlockError</a></code></p>



        <p>Raised when a policy explicitly rejects an intent.</p>









    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>